"use strict";(self.webpackChunkonline_store=self.webpackChunkonline_store||[]).push([[165],{1768:function(e,t,n){var r=n(4569),a=n.n(r)().create({baseURL:"https://amh-store.herokuapp.com/api/v1/orders"});t.Z=a},1907:function(e,t,n){var r=n(4569),a=n.n(r)().create({baseURL:"https://amh-store.herokuapp.com/api/v1/products"});t.Z=a},6819:function(e,t,n){n.d(t,{Z:function(){return d}});n(2791);var r="OrderItem_OrderItem__SnqFC",a="OrderItem_imageContainer__LyRF+",i="OrderItem_nameContainer__7smBb",s="OrderItem_name__ZUXCT",o="OrderItem_price__9Eum9",c="OrderItem_quantity__dvEoE",u=n(9946),l=n(184),d=function(e){return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)("div",{className:a,children:(0,l.jsx)("img",{src:u,alt:e.item.name})}),(0,l.jsxs)("div",{className:i,children:[(0,l.jsx)("h5",{className:s,children:e.item.name}),(0,l.jsxs)("h4",{className:o,children:["$",e.item.price]}),(0,l.jsx)("h3",{className:c,children:e.itemQuantity})]})]})}},8408:function(e,t,n){n.d(t,{Z:function(){return i}});n(2791);var r="Button_Button__Ip4AH",a=n(184),i=function(e){var t={fontWeight:e.fontWeight,padding:e.padding,fontSize:e.fontSize,backgroundColor:e.backgroundColor};return(0,a.jsx)("button",{type:"submit",className:r,style:t,onClick:e.clicked,children:e.children})}},9929:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(4942),a=n(1413),i=n(885),s=n(2791),o="Form_Form__ZktGn",c=n(626),u=n(8408),l=n(184),d=function(e){var t=(0,s.useState)((0,a.Z)({},e.form)),n=(0,i.Z)(t,2),d=n[0],p=n[1],m=[];for(var h in d)m.push({id:h,config:d[h]});return(0,l.jsxs)("form",{className:o,onSubmit:function(t){t.preventDefault();var n={};for(var r in d)if("radioInput"===d[r].elementType){var a=d[r].elementConfig.findIndex((function(e){return e.checked})),i=d[r].value[a];n[r]=i}else n[r]=d[r].value;e.dataProcessed(n)},children:[m.map((function(e){return(0,l.jsx)(c.Z,{elementType:e.config.elementType,elementConfig:e.config.elementConfig,name:e.id,value:e.config.value,changed:function(t){!function(e,t){var n=(0,a.Z)((0,a.Z)({},d),{},(0,r.Z)({},t,(0,a.Z)((0,a.Z)({},d[t]),{},{value:e.target.value})));p(n)}(t,e.id)}},e.id)})),(0,l.jsx)(u.Z,{fontWeight:"400",fontSize:"1.1rem",children:e.buttonText}),e.children]})}},626:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(1413),a=n(4165),i=n(5861),s=n(885),o=n(2791),c={Input:"Input_Input__vjpSZ",SelectInput:"Input_SelectInput__rnzqj",Textarea:"Input_Textarea__R5rtu",FileInputContainer:"Input_FileInputContainer__hBKVf",FileURLInput:"Input_FileURLInput__8VW7i",FileInput:"Input_FileInput__EyR8R",FileInputLabel:"Input_FileInputLabel__76CSO",loaderContainer:"Input_loaderContainer__J3EUt",RadioInputContainer:"Input_RadioInputContainer__4ICrx",RadioInput:"Input_RadioInput__pkzl2",RadioInputLabel:"Input_RadioInputLabel__VZaSW"},u=n(1586),l=n(4569),d=n.n(l)().create({baseURL:"https://amh-store.herokuapp.com/api/v1/upload/"}),p=n(4282),m=n(184),h=function(e){var t=null,n=(0,o.useState)(!1),l=(0,s.Z)(n,2),h=l[0],f=l[1],x=(0,o.useState)(""),v=(0,s.Z)(x,2),y=v[0],_=v[1],g=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("image",t.target.files[0]),f(!0),e.next=6,d.post("",n);case 6:r=e.sent,i=r.data.path,_(i),f(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();switch(e.elementType){case"input":t=(0,m.jsx)("input",(0,r.Z)((0,r.Z)({className:c.Input},e.elementConfig),{},{name:e.name,value:e.value,onChange:e.changed,required:!0}));break;case"fileInput":t=(0,m.jsxs)("div",{className:c.FileInputContainer,children:[(0,m.jsx)("input",{className:c.FileURLInput,type:"url",placeholder:e.elementConfig.placeholder,name:e.name,value:y||e.value,onChange:e.changed,required:!0}),(0,m.jsx)("input",{className:c.FileInput,type:e.elementConfig.type,accept:e.elementConfig.accept,onChange:g,id:e.name}),(0,m.jsx)("div",{className:c.loaderContainer,children:h?(0,m.jsx)(p.Z,{size:"small"}):null}),(0,m.jsx)("label",{className:c.FileInputLabel,htmlFor:e.name,children:"Upload"})]});break;case"select":t=(0,m.jsx)("select",{className:c.SelectInput,name:e.name,value:e.value,onChange:e.changed,children:e.elementConfig.options.map((function(e){return(0,m.jsx)("option",{value:e.value,children:e.displayValue},e.value)}))});break;case"radioInput":t=(0,m.jsx)("div",{className:c.RadioInputContainer,children:e.elementConfig.map((function(t,n){return(0,m.jsxs)(u.Z,{children:[(0,m.jsx)("input",(0,r.Z)((0,r.Z)({className:c.RadioInput},t),{},{name:e.name[n],value:e.value[n],id:e.value[n]})),(0,m.jsx)("label",{className:c.RadioInputLabel,htmlFor:e.value[n],children:e.value[n]})]},e.value[n])}))});break;case"textarea":t=(0,m.jsx)("textarea",(0,r.Z)((0,r.Z)({className:[c.Input,c.Textarea].join(" ")},e.elementConfig),{},{name:e.value,value:e.value,onChange:e.changed,required:!0}))}return(0,m.jsx)(u.Z,{children:t})}},4282:function(e,t,n){n.d(t,{Z:function(){return s}});n(2791);var r="Loader_loaderContainer__pwLPQ",a="Loader_loader__ZEPsn",i=n(184),s=function(e){var t="small"===e.size?{width:"40px",height:"40px"}:{width:"80px",height:"80px"},n="small"===e.size?{borderWidth:"20px"}:{borderWidth:"40px"};return(0,i.jsx)("div",{className:r,style:t,children:(0,i.jsx)("span",{className:a,style:n})})}},2790:function(e,t,n){n.d(t,{Z:function(){return i}});n(2791);var r="SectionTitle_SectionTitle__k-YvA",a=n(184),i=function(e){return(0,a.jsx)("h1",{className:r,children:e.children})}},3142:function(e,t,n){n.d(t,{FF:function(){return c},HM:function(){return o},Ic:function(){return d},LL:function(){return u},kh:function(){return l},rk:function(){return m},wk:function(){return p}});var r=n(4165),a=n(5861),i=n(4824),s=n(1907),o=function(){return{type:i.Uw}},c=function(e,t){return function(n){(0,a.Z)((0,r.Z)().mark((function a(){var c,u;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:i.VX}),r.next=4,s.Z.get("/".concat(e));case 4:c=r.sent,u=c.data.data,n((a=u,l=t,{type:i.cl,product:a,quantity:l})),n(o()),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}var a,l}),a,null,[[0,10]])})))()}},u=function(){return{type:i.qX}},l=function(e){return{type:i.eI,productID:e}},d=function(e,t){return{type:i.HP,targetProduct:t,event:e}},p=function(){return{type:i.$A}},m=function(){return{type:i.Sv}}},1165:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(5671),a=n(3144),i=n(9340),s=n(2882),o=n(2791),c="Checkout_checkoutProgressHead__zVrv+",u="Checkout_progressItem__SD8T8",l="Checkout_active__jeKU7",d="Checkout_disabled__04PpW",p=n(3504),m=n(6871),h=n(9795),f=n(8687),x=n(4165),v=n(5861),y=n(1293),_=n(1768),g=n(3142),j=n(4270),I=n(1586),Z=n(885),C=n(2790),k=n(9929),S=n(184),P=function(e){var t=(0,o.useState)({address:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter your address",required:!0},value:""},city:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter your city",required:!0},value:""},postalCode:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter your postal code",required:!0},value:""},country:{elementType:"input",elementConfig:{type:"text",placeholder:"Enter your country",required:!0},value:""}}),n=(0,Z.Z)(t,1)[0],r=(0,m.s0)();return(0,S.jsxs)(I.Z,{children:[(0,S.jsx)(C.Z,{}),(0,S.jsx)(k.Z,{form:n,dataProcessed:function(t){e.storeData(t),r("/checkout/payment")},buttonText:"CONTINUE"})]})},N="Backdrop_Backdrop__kNM89",O=function(e){return(0,S.jsx)("div",{className:N,onClick:e.clicked,children:e.children})},b="PayPal_PayPal__zM659",D=function(e){var t=(0,m.s0)();return(0,o.useEffect)((function(){window.paypal.Buttons({createOrder:function(t,n){return n.order.create({purchase_units:[{amount:{value:e.totalPrice}}]})},onApprove:function(e,n){return n.order.capture().then((function(e){"COMPLETED"===e.status&&(alert("Successfully Paid!"),t("/checkout/ordersummary"))}))}}).render("#paypal-button-container")}),[]),(0,S.jsx)("div",{className:b,children:(0,S.jsx)("div",{id:"paypal-button-container"})})},T=function(e){var t=(0,o.useState)({paymentMethod:{elementType:"radioInput",elementConfig:[{type:"radio",checked:!0,readOnly:!0}],value:["PayPal"]}}),n=(0,Z.Z)(t,1)[0],r=(0,o.useState)(!1),a=(0,Z.Z)(r,2),i=a[0],s=a[1],c=(0,m.s0)();return(0,S.jsxs)(I.Z,{children:[(0,S.jsx)(C.Z,{}),(0,S.jsx)(k.Z,{form:n,buttonText:"CONTINUE",dataProcessed:function(t){e.storeData(t),s(!0)}}),i?(0,S.jsx)(O,{clicked:function(){return c("/checkout/ordersummary")},children:(0,S.jsx)(D,{totalPrice:e.cartItemsPrice})}):null]})},F=n(1413),R={OrderSummary:"OrderSummary_OrderSummary__NFevJ",orderItemsContainer:"OrderSummary_orderItemsContainer__P5YjQ",pricesSummary:"OrderSummary_pricesSummary__7gHC9",orderItems:"OrderSummary_orderItems__IyHNY",orderButtonContainer:"OrderSummary_orderButtonContainer__Khq6F",loaderContainer:"OrderSummary_loaderContainer__Tu414"},U=n(8408),L=n(6819),E=n(4282),q=function(e){var t=(0,o.useState)({shippingAddress:null,paymentMethod:"",orderItems:[],shippingPrice:10,taxPrice:53.99,itemsPrice:0,totalPrice:0}),n=(0,Z.Z)(t,2),r=n[0],a=n[1],i=(0,m.s0)();return(0,o.useEffect)((function(){var t=e.paymentData.paymentMethod,n=e.cartProducts.map((function(e){return{countInStock:e.countInStock,image:e.image,name:e.name,price:e.price,product:e.id,quantity:e.quantity.value}}));a((function(r){return(0,F.Z)((0,F.Z)({},r),{},{shippingAddress:e.shippingData,paymentMethod:t,orderItems:n,itemsPrice:e.totalCartItemsPrice,totalPrice:e.totalCartItemsPrice+r.shippingPrice+r.taxPrice})})),e.isOrdered&&(alert("Your order is placed successfully!"),e.unsetOrderedState(),i("/"))}),[e.shippingData,e.paymentData,e.cartProducts,e.isOrdered]),(0,S.jsxs)("section",{className:R.OrderSummary,children:[(0,S.jsxs)("div",{className:R.address,children:[(0,S.jsx)("strong",{children:"Address:"}),e.shippingData.address,", \xa0",e.shippingData.city,", \xa0",e.shippingData.country,", \xa0",e.shippingData.postalCode]}),(0,S.jsxs)("div",{className:R.paymentMethod,children:[(0,S.jsx)("strong",{children:"Payment method:"})," ",r.paymentMethod]}),(0,S.jsxs)("div",{className:R.orderItemsContainer,children:[(0,S.jsx)("h2",{children:"Order items:"}),(0,S.jsx)("div",{className:R.orderItems,children:r.orderItems.map((function(e){return(0,S.jsx)(L.Z,{item:e,itemQuantity:parseInt(e.quantity,10)},e.product)}))})]}),(0,S.jsxs)("div",{className:R.pricesSummary,children:[(0,S.jsx)("strong",{children:"Items price:"})," $",r.itemsPrice," ",(0,S.jsx)("br",{}),(0,S.jsx)("strong",{children:"Shipping price:"})," $10 ",(0,S.jsx)("br",{}),(0,S.jsx)("strong",{children:"Tax price:"})," $53.99 ",(0,S.jsx)("br",{})]}),(0,S.jsx)("div",{className:R.totalPrice,children:(0,S.jsxs)("strong",{children:["Total price: $",r.totalPrice]})}),(0,S.jsxs)("div",{className:R.orderButtonContainer,children:[(0,S.jsx)(U.Z,{fontWeight:"700",fontSize:"1.1rem",clicked:function(){return e.orderPlaced(r)},children:"PLACE ORDER"}),(0,S.jsx)("div",{className:R.loaderContainer,children:e.loading?(0,S.jsx)(E.Z,{size:"small"}):null})]})]})},w=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.props.onUnsetOrderingState()}},{key:"render",value:function(){var e=this,t={shipping:[u],payment:[u],ordersummary:[u]},n=this.props.location.pathname.split("/"),r=n[n.length-1],a=!1;for(var i in t)i===r?(t[i]=[u,l],a=!0):t[i]=a?[u,d]:[u];return(0,S.jsxs)(I.Z,{children:[(0,S.jsx)(j.q,{children:(0,S.jsx)("title",{children:"Online Store | Checkout"})}),(0,S.jsxs)("div",{className:c,children:[(0,S.jsx)("span",{className:t.shipping.join(" "),children:(0,S.jsx)(p.rU,{to:"/checkout/shipping",children:"Shipping"})}),(0,S.jsx)("span",{className:t.payment.join(" "),children:(0,S.jsx)(p.rU,{to:"/checkout/payment",children:"Payment Method"})}),(0,S.jsx)("span",{className:t.ordersummary.join(" "),children:(0,S.jsx)(p.rU,{to:"/checkout/ordersummary",children:"Order Summary"})})]}),(0,S.jsxs)(m.Z5,{children:[(0,S.jsx)(m.AW,{path:"shipping",element:(0,S.jsx)(P,{storeData:function(t){return e.props.onSetShippingData(t)}})}),(0,S.jsx)(m.AW,{path:"payment",element:(0,S.jsx)(T,{storeData:function(t){return e.props.onSetPaymentData(t)},cartItemsPrice:this.props.cartItemsPrice})}),(0,S.jsx)(m.AW,{path:"ordersummary",element:(0,S.jsx)(q,{shippingData:this.props.shipping,paymentData:this.props.payment,cartProducts:this.props.cartItems,totalCartItemsPrice:this.props.cartItemsPrice,orderPlaced:function(t){e.props.onPlaceOrder(t,e.props.token)},isOrdered:this.props.isOrdered,unsetOrderedState:this.props.onUnsetOrderedState,loading:this.props.loading})})]})]})}}]),n}(o.Component),z=(0,f.$j)((function(e){return{cartItems:e.cart.products,cartItemsPrice:e.cart.totalPrice,shipping:e.checkout.shipping,payment:e.checkout.payment,isOrdered:e.checkout.isOrdered,loading:e.checkout.loading,token:e.register.token}}),(function(e){return{onUnsetOrderingState:function(){return e((0,g.rk)())},onSetShippingData:function(t){return e(function(e){return{type:y.h$,data:e}}(t))},onSetPaymentData:function(t){return e(function(e){return{type:y.Nr,data:e}}(t))},onPlaceOrder:function(t,n){return e(function(e,t){return function(n){(0,v.Z)((0,x.Z)().mark((function r(){var a;return(0,x.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:y.VX}),r.next=4,_.Z.post("",e,{headers:{Authorization:"Bearer ".concat(t)}});case 4:a=r.sent,n((i=a.data,{type:y.FM,orderDetails:i})),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}var i}),r,null,[[0,8]])})))()}}(t,n))},onUnsetOrderedState:function(){return e({type:y.By})}}}))((0,h.Z)(w))},9795:function(e,t,n){var r=n(1413),a=(n(2791),n(6871)),i=n(184);t.Z=function(e){return function(t){return(0,i.jsx)(e,(0,r.Z)((0,r.Z)({},t),{},{params:(0,a.UO)(),navigate:(0,a.s0)(),location:(0,a.TH)()}))}}},9946:function(e,t,n){e.exports=n.p+"static/media/Controller.cbe8848551029d2efce6.jpg"}}]);
//# sourceMappingURL=165.23192f9f.chunk.js.map